### Передаваемые данные плагину

<pre>{
  "id": 177,                                      //ID или номер заказа
  "caption": "SacredDev",                         //Заголовок, заполняется при создании заказа и обычно это ник пользователя
  "description": null,                            //Описание заказа, на текущий момент пустое
  "isPayment": false,                             //Признак оплаты, true если заказа оплачен
  "status": 2,                                    //Статус заказа. 0-создан, 1 - начат, 2 - завершен, -1 - отменен
  "number": null,                                 //Номер будет заполнен в следующих версия внутренний номер заказа
  "createdAt": "2023-12-06T13:55:27.607Z",        //Дата создания заказа
  "updatedAt": "2023-12-06T15:16:25.342Z",        //Дата изменения данных заказа
  "botId": 1,                                     //Идентификатор бота в котором был создан заказ
  "paymentId": 2,                                 //Идентификатор способа оплаты
  "deliveryAddressId": 30,                        //Идентификатор адреса клиента
  "promoId": null,                                //Идентификатор использованного промокода
  "deliveryId": null,                             //Идентификатор использованного типа доставки
  "deliveryZoneId": null,                         //Идентификатор расчетной зоны доставки
  "deliveryListOrServiceId": null,                //ИдентификаторСписка из зон доставки
  "storeId": 1,                                   //Идентификатор магазина, может быть пустым если у бота указано больше одного магазина
  "storeTableId": null,                           //Идентификатор столика для заказа
  "orderDescriptions": [                          //Дополнительные поля для заказа, от оплаты и/или доставки
    {
      "fields": {                                 //Список полей
        "test": {                                 //Название дополнительного поля
          "value": "22222",                       //Значение введенное пользователем
          "name": "description 222"               //Название поля
        }
      },
      "id": 277,                                  //Идентификатор описания для заказа
      "clientPhone": "+38 (222) 222-222"          //Номер телефона указанный клиентом. Создается если есть дополнительное поля с именем phone
    }
  ],
  "orderCompositions": [                          //Состав заказа
    {
      "id": 299,                                  //Идентификатор состава
      "count": 1,                                 //Количество, 1 если продается дополнение а не сам товар
      "price": 0,                                 //Цена в момент продажи
      "withOutPrice": null,                       //Если у товара указано не участвует в расчете
      "isCategory": null,                         //Признак категории, устаревший функционал в следующих версиях может отсутствовать
      "isConsumable": null,                       //Признак того что товар как расходник
      "orderAddonCompositions": [],               //Список дополнений для этого товара, поля аналогичные как и у товара
      "good": {                                   //Описание самого товара
        "mediaCount": 0,                          //Количество фото для товара
        "id": 469,                                //Идентификатор товара
        "caption": "good level 1",                //Заголовок товара
        "description": "",                        //Описание товара
        "article": null,                          //Артикул товара
        "level": null,                            //Уровень для сортировки вывода в списке товаров
        "otherId": null,                          //Сторонний идентификатор из сторонней системы
        "captionSection": null,                   //Название раздела для дополнений
        "isConsumable": null,                     //Признак расходника
        "isNew": null,                            //Признак нового товара, если он установлен в ручную, а не на уровне магазина
        "isHot": null,                            //Признак горячего предложения
        "addonExt": "456",                        //Маркер для товара
        "storeId": 1,                             //Магазин на котором расположен товара, может быть пустым
        "goodId": null,                           //Связь с товаром при копировании
        "model": {                                //Модель товара
          "mediaCount": 0,                        //Количество фото модели
          "modelCount": 0,                        //Количество вложенных моделей
          "modelCountWithOutStopList": 0,         //Количество моделей в стоп листе
          "id": 127,                              //Идентификатор модели
          "caption": "test level 1",              //Заголовок модели
          "description": null,                    //Описание модели
          "level": 1,                             //Уровень для сортировки показа моделей
          "addonsActive": null,                   //Признак активного выбранного дополнения по умолчанию, не используется
          "showPhotoCategory": null,              //Показ фото как раздела в общем списке
          "alignText": null,                      //Выравнивание текста
          "textBgColor": null,                    //Фон для обводки текста
          "textColor": null,                      //Цвет теста
          "filter": null,                         //Уровень размытия
          "article": null,                        //Артикул
          "otherId": null,                        //Идентификатор из сторонней системы
          "parentLevel": null,                    //Уровень вложения модели
          "storeId": 1,                           //Идентификатор магазина
          "modelId": null,                        //Идентификатор копирования модели
          "parentId": null,                       //Идентификатор вложения модели
          "specificationVals": []                 //Структура для характеристик модели
        },
        "specificationVals": []                   //Структура для характеристик товара
      }
    }
  ],
  "client": {                                     //Информация о клиенте
    "id": 53,                                     //Идентификатор клиента
    "caption": "Виталий Иванов",                  //Описание клиента, фио
    "description": null,                          //Описание, на текущий момент не используется
    "userName": "SacredDev",                      //Логин пользователя
    "phone": null,                                //Не используется
    "isGroup": false,                             //Признак того что это группа а не просто клиент
    "status": null,                               //Признак блокировки, -1 заблокирован бот клиентом 
    "botId": 1                                    //Идентификатор бота
  },
  "delivery": null,                               //Данные для доставки
  "deliveryListOrService": null,                  //Выбранный способ доставки из списка
  "deliveryAddress": {                            //Информация о созданном адресе у клиента зависит от используемого плагина и типа доставки
    "id": 30,                                     //Идентификатор записи
    "full": null,
    "coordinates": null,
    "street": "111",
    "house": null,
    "apartment": null,
    "entrance": null,
    "floor": null,
    "doorCode": null,
    "description": null,
    "caption": null,
    "pluginId": null,
    "pluginData": null,
    "clientId": 28,
    "deliveryId": 5,
    "storeTableId": null,
    "delivery": {                                 //Структура типа доставки
      "fields": null,
      "id": 5,
      "caption": "Ручной ввод",
      "description": null,
      "level": null,
      "icon": null,
      "color": null,
      "needAddressDelivery": true,
      "listOrService": null,
      "isTable": null,
      "useMap": null,
      "autoDetectPosition": null,
      "storeId": 1
    }
  },
  "payment": {                                               //Способ оплаты
    "fields": [                                              //Дополнительные поля которые есть у оплаты
      {
        "id": "6eed5f7c-4244-41a9-ff2a-b7c2c25eff8b",
        "name": "phone",
        "value": "asd",
        "countRows": 2,
        "required": true
      }
    ],
    "pluginDataJson": {                                      //Данные из плагина оплаты, данные зависит от самого плагина
      "payment": "card_ru",
      "returnUrl": "https://tc.sacredapp.us/afterPayment",
      "blank": true,
      "redirect": true
    },
    "id": 2,                                                 //Идентификатор оплаты
    "caption": "Test passion",
    "description": null,
    "isTelegram": null,
    "pluginName": "payssion",                                //Название используемого плагина
    "timeWait": null,
    "percent": null,
    "minPrice": null,
    "exchange": null
  },
  "calcDeliveryData": [],                                    //Данные по расчету веса или критерия доставки
  "total": {                                                 //Общие данные оплаты по заказу, суммы разделенные по типам
    "items": 0,
    "delivery": 0,
    "nowDelivery": 0,
    "payment": 0,
    "promo": 0,
    "zone": 0,
    "full": 0
  }
}
</pre>

### Отмет от плагина

Не обязателен, может быть пустым объектом. Если указан типа плагина что отправляет файл то структура для отправки описана ниже

<pre>{
  data: buf,                                                 //Данные для отправки клиенту, используется если нужно в плагине отправить файл
  fileName: "text.xlsx",                                     //Название файла для отправки клиенту
  fileType: "application/vnd.ms-excel;charset=utf-8",        //Тип отправляемых данных
}
</pre>

### Типы реагирования

<pre>
fromMenuOrder.js //При вызове плагина из пункта меню, для заказа или списка заказов
isCancel.js      //При отменен заказа
isCreate.js      //При создании заказа
isDone.js        //При выполнении внутри отдела, если отделов несколько то будет вызван при выполнении в каждом из них
isFullDone.js    //Полное выполнение заказа когда была нажата выполнить в последнем отделе, или когда выполнили заказа из админ панели
isStart.js       //Когда начали выполнение заказа в отделе аналогично выполнении внутри отдела
</pre>
